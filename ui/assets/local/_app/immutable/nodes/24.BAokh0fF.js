import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as we,l as C,a as Me,e as b,r as m,t as R,d as r,b as ye,s as n,g as e,m as c,f as ae,az as $,ag as Be,n as re,c as Z,i as et}from"../chunks/Dv5jDC8Z.js";import{a as t,t as _,c as qe,b as ce}from"../chunks/BM_uyzAk.js";import{i as ke}from"../chunks/CM2QeVoh.js";import{s as Le,a as F,b as Ve,m as tt}from"../chunks/CEr_ApTH.js";import{p as Re}from"../chunks/DUbvhX2N.js";import{P as st}from"../chunks/PLLlBlGt.js";import{s as q}from"../chunks/CnnFVxmh.js";import{i as O}from"../chunks/FbCjvpNA.js";import{k as Xe}from"../chunks/ehIHThNH.js";import{e as xe,i as Ee}from"../chunks/CocFUsaO.js";import{o as rt}from"../chunks/s0RhsljA.js";import{g as at}from"../chunks/Dt0BXCrN.js";import{t as o}from"../chunks/CZMG2GAD.js";import{i as ot,j as Ge}from"../chunks/GZlEQDL6.js";import{b as He,h as nt,c as lt}from"../chunks/Es6MmIER.js";import{l as it,p as De}from"../chunks/BbkaS_Cl.js";import{W as ct}from"../chunks/uFOGAOV_.js";import{L as ze}from"../chunks/JRCi7r2-.js";import{f as Je,t as ut,r as dt}from"../chunks/9czO_RoD.js";import{d as mt}from"../chunks/Bc9mmJe5.js";import{p as ft,b as pt,u as Qe}from"../chunks/Bejpy5M8.js";import{s as vt}from"../chunks/wdddUT-U.js";import{s as _t}from"../chunks/CTBtQUu0.js";import{C as ht,T as gt,a as $t,S as bt,c as xt}from"../chunks/YmLe7gW6.js";import{A as wt}from"../chunks/CXRblWjG.js";import{B as Ue}from"../chunks/Dwfpj6FK.js";import{E as je}from"../chunks/lbyfKwPg.js";import{I as yt}from"../chunks/CrYHGHR9.js";import{A as kt}from"../chunks/M5Pi0d7l.js";import{T as Ct}from"../chunks/CcIHoDhR.js";import{i as Tt}from"../chunks/CCKaRl0l.js";import{c as At}from"../chunks/ChCliITa.js";import{s as Oe}from"../chunks/Sa3_5mVv.js";import{s as St,b as Pt}from"../chunks/BOxXvrkj.js";import{t as It}from"../chunks/DMVvVSeH.js";import{S as Ft}from"../chunks/CtkXdByl.js";import{a as qt}from"../chunks/Boc8GIKt.js";import{m as Et}from"../chunks/8b9VeVr0.js";var Dt=_('<div class="flex flex-wrap items-center gap-2"> </div>');function zt(Y,E){we(E,!1);const[f,V]=Le(),T=()=>F(Re,"$page",f),A=()=>F(He,"$schedulesCount",f),S=c(),d=async()=>{try{Ve(He,await ot({namespace:e(S)}))}catch(W){console.error("Fetching schedules count failed: ",W==null?void 0:W.message)}};C(()=>T(),()=>{n(S,T().params.namespace)}),C(()=>e(S),()=>{e(S),d()}),Me(),ke();var w=Dt(),H=b(w,!0);m(w),R(W=>q(H,W),[()=>o("common.schedules-plural",{count:Number(A())})],r),t(Y,w),ye(),V()}var Lt=_("<div><code><pre> </pre></code></div>");function Rt(Y,E){const f=it(E,["children","$$slots","$$events","$$legacy"]);we(E,!1);let V=De(E,"calendar",8,void 0),T=De(E,"interval",8,void 0);ke();var A=qe(),S=ae(A);Xe(S,()=>[V(),T()],d=>{var w=Lt(),H=b(w),W=b(H),oe=b(W,!0);m(W),m(H),m(w),R(ue=>{vt(w,1,`frequency ${f.class??""}`,"svelte-egff5j"),q(oe,ue)},[()=>_t(V()||T(),void 0,2)],r),t(d,w)}),t(Y,A),ye()}var Wt=_('<td class="cell svelte-tyvqki"><!></td>'),Bt=_('<td class="cell whitespace-pre-line break-words svelte-tyvqki"><!></td>'),Ut=_('<td class="cell whitespace-pre-line break-words svelte-tyvqki"> </td>'),jt=_("<p><!></p>"),Ot=_('<td class="cell truncate svelte-tyvqki"></td>'),Vt=_("<div> </div>"),Ht=_('<td class="cell truncate svelte-tyvqki"></td>'),Mt=_('<td class="cell svelte-tyvqki"><p><!></p> <!></td>'),Nt=_('<td class="cell svelte-tyvqki"> </td>'),Yt=_("<tr></tr>");function Kt(Y,E){we(E,!1);const[f,V]=Le(),T=()=>F(Re,"$page",f),A=()=>F(ut,"$timeFormat",f),S=()=>F(dt,"$relativeTime",f),d=c(),w=c(),H=c(),W=c(),oe=c(),ue=c(),P=c();var ee=c(),te=c(),ne=c(),B=c();let{namespace:_e}=T().params,p=De(E,"schedule",8),de=De(E,"columns",8);const me=K=>{var G;return(G=K==null?void 0:K.sort((D,pe)=>new Date(pe.actualTime).getTime()-new Date(D.actualTime).getTime()).slice(0,5))!==null&&G!==void 0?G:[]};C(()=>($(ee),Be(p())),()=>{n(d,n(ee,p()===null||p()===void 0?void 0:p().info)===null||$(ee)===void 0?void 0:$(ee).spec)}),C(()=>($(te),e(d)),()=>{n(w,n(te,e(d)===null||e(d)===void 0?void 0:e(d).structuredCalendar)===null||$(te)===void 0?void 0:$(te)[0])}),C(()=>($(ne),e(d)),()=>{n(H,n(ne,e(d)===null||e(d)===void 0?void 0:e(d).interval)===null||$(ne)===void 0?void 0:$(ne)[0])}),C(()=>e(d),()=>{n(W,(e(d)===null||e(d)===void 0?void 0:e(d).timezoneName)||"UTC")}),C(()=>($(B),Be(p())),()=>{n(oe,n(B,p()===null||p()===void 0?void 0:p().searchAttributes)!==null&&$(B)!==void 0?$(B):{})}),C(()=>e(oe),()=>{n(ue,mt({searchAttributes:e(oe)}))}),C(()=>Be(p()),()=>{n(P,ft({namespace:_e,scheduleId:p()===null||p()===void 0?void 0:p().scheduleId}))}),Me(),ke();var fe=Yt();xe(fe,5,de,({label:K})=>K,(K,G)=>{let D=()=>e(G).label;var pe=qe(),Ce=ae(pe);{var Te=se=>{var le=Wt(),he=b(le);const z=r(()=>{var x,M;return(M=(x=p())==null?void 0:x.info)!=null&&M.paused?"Paused":"Running"});ct(he,{get status(){return e(z)}}),m(le),t(se,le)},Ae=(se,le)=>{{var he=x=>{var M=Bt(),ge=b(M);ze(ge,{get href(){return e(P)},children:($e,J)=>{re();var N=ce();R(()=>q(N,p().scheduleId)),t($e,N)},$$slots:{default:!0}}),m(M),t(x,M)},z=(x,M)=>{{var ge=J=>{var N=Ut(),I=b(N,!0);m(N),R(()=>{var U,a,v;return q(I,((v=(a=(U=p())==null?void 0:U.info)==null?void 0:a.workflowType)==null?void 0:v.name)??"")}),t(J,N)},$e=(J,N)=>{{var I=a=>{var v=Ot();xe(v,5,()=>{var g,h;return me((h=(g=p())==null?void 0:g.info)==null?void 0:h.recentActions)},Ee,(g,h)=>{var l=jt(),y=b(l);const L=r(()=>{var k,s,u,i;return pt({namespace:_e,workflow:(s=(k=e(h))==null?void 0:k.startWorkflowResult)==null?void 0:s.workflowId,run:(i=(u=e(h))==null?void 0:u.startWorkflowResult)==null?void 0:i.runId})});ze(y,{get href(){return e(L)},children:(k,s)=>{re();var u=ce();R(i=>q(u,i),[()=>{var i;return Je((i=e(h))==null?void 0:i.actualTime,A(),{relative:S()})}],r),t(k,u)},$$slots:{default:!0}}),m(l),t(g,l)}),m(v),t(a,v)},U=(a,v)=>{{var g=l=>{var y=Ht();xe(y,5,()=>{var L,k,s;return((s=(k=(L=p())==null?void 0:L.info)==null?void 0:k.futureActionTimes)==null?void 0:s.slice(0,5))??[]},Ee,(L,k)=>{var s=Vt(),u=b(s,!0);m(s),R(i=>q(u,i),[()=>Je(e(k),A(),{relative:S(),relativeLabel:o("common.from-now")})],r),t(L,s)}),m(y),t(l,y)},h=(l,y)=>{{var L=s=>{var u=Mt(),i=b(u),ie=b(i);nt(ie,()=>o("common.timezone",{timezone:e(W)})),m(i);var Q=Z(i,2);Rt(Q,{get calendar(){return e(w)},get interval(){return e(H)}}),m(u),t(s,u)},k=s=>{var u=Nt(),i=b(u,!0);m(u),R(()=>{var ie,Q,j;return q(i,((j=(Q=(ie=e(ue))==null?void 0:ie.searchAttributes)==null?void 0:Q.indexedFields)==null?void 0:j[D()])??"")}),t(s,u)};O(l,s=>{D()===o("schedules.schedule-spec")?s(L):s(k,!1)},y)}};O(a,l=>{D()===o("schedules.upcoming-runs")?l(g):l(h,!1)},v)}};O(J,a=>{D()===o("schedules.recent-runs")?a(I):a(U,!1)},N)}};O(x,J=>{D()===o("common.workflow-type")?J(ge):J($e,!1)},M)}};O(se,x=>{D()===o("schedules.id")?x(he):x(z,!1)},le)}};O(Ce,se=>{D()===o("common.status")?se(Te):se(Ae,!1)})}t(K,pe)}),m(fe),t(Y,fe),ye(),V()}var Gt=_('<caption class="sr-only" slot="caption"> </caption>'),Jt=_("<!> <!>",1),Qt=_('<div class="flex flex-col gap-4" slot="header"><h1 class="flex flex-col gap-0 md:flex-row md:items-center md:gap-2"><!></h1> <div class="flex flex-col justify-between gap-2 md:flex-row"><!></div></div>'),Xt=_("<th> </th>"),Zt=_('<tr slot="headers" class="text-left"></tr>'),es=_("<p> <!> <!>.</p> <!>",1),ts=_("<!> <!>",1);function ss(Y,E){we(E,!1);const[f,V]=Le(),T=()=>F(Re,"$page",f),A=()=>F(xt,"$configurableTableColumns",f),S=()=>F(K,"$coreUser",f),d=()=>F(Tt,"$isCloud",f),w=()=>F(It,"$temporalVersion",f),H=()=>F(Pt,"$customSearchAttributes",f),W=()=>F(Oe,"$scheduleFilters",f),oe=()=>F(St,"$searchAttributes",f),ue=()=>F(He,"$schedulesCount",f),P=c(),ee=c(),te=c(),ne=c(),B=c(),_e=c(),p=c();var de=c(),me=c();let fe=c(Date.now()),K=At(),G=c(!1),D=c("");const pe=()=>{n(G,!0)};rt(()=>{e(B)&&Ve(Oe,qt(e(B),oe()))});const Ce=z=>{var x;n(D,((x=z==null?void 0:z.body)===null||x===void 0?void 0:x.message)||o("schedules.error-message-fetching"))};C(()=>T(),()=>{n(P,T().params.namespace)}),C(()=>($(me),$(de),A(),e(P)),()=>{n(ee,n(me,n(de,A()===null||A()===void 0?void 0:A()[e(P)])===null||$(de)===void 0?void 0:$(de).schedules)!==null&&$(me)!==void 0?$(me):[])}),C(()=>(S(),e(P)),()=>{n(te,S().namespaceWriteDisabled(e(P)))}),C(()=>(d(),w(),H()),()=>{n(ne,Object.entries({...(d()||Et("1.25.0",w()))&&{ScheduleId:Ft.KEYWORD},...H()}).map(([z,x])=>({label:z,value:z,type:x})))}),C(()=>T(),()=>{n(B,T().url.searchParams.get("query"))}),C(()=>(e(P),e(B)),()=>{n(_e,()=>(n(D,""),lt(e(P),e(B),Ce)))}),C(()=>e(P),()=>{n(p,$t(e(P)))}),Me(),ke();var Te=ts(),Ae=ae(Te);Xe(Ae,()=>[e(P),e(B),e(fe)],z=>{const x=r(()=>o("common.schedules")),M=r(()=>o("common.per-page")),ge=r(()=>o("common.next")),$e=r(()=>o("common.previous")),J=r(()=>o("schedules.empty-state-title")),N=r(()=>o("schedules.error-message-fetching"));kt(z,{get onFetch(){return e(_e)},onError:Ce,get total(){return ue()},get"aria-label"(){return e(x)},get pageSizeSelectLabel(){return e(M)},get nextButtonLabel(){return e(ge)},get previousButtonLabel(){return e($e)},get emptyStateMessage(){return e(J)},get errorMessage(){return e(N)},children:et,$$slots:{default:(I,U)=>{const a=r(()=>U.visibleItems);var v=qe(),g=ae(v);xe(g,1,()=>e(a),Ee,(h,l)=>{Kt(h,{get schedule(){return e(l)},get columns(){return e(ee)}})}),t(I,v)},caption:(I,U)=>{var a=Gt(),v=b(a,!0);m(a),R(g=>q(v,g),[()=>o("common.schedules")],r),t(I,a)},header:(I,U)=>{var a=Qt();const v=r(()=>U.visibleItems),g=r(()=>e(v).length||e(B));var h=b(a),l=b(h);zt(l,{}),m(h);var y=Z(h,2),L=b(y);{var k=s=>{var u=Jt(),i=ae(u);bt(i,{get options(){return e(ne)},refresh:()=>{n(fe,Date.now())},get filters(){return tt(),W()},set filters(j){Ve(Oe,j)},$$legacy:!0});var ie=Z(i,2);{var Q=j=>{const Se=r(()=>Qe({namespace:e(P)})),Pe=r(()=>!Ge());Ue(j,{"data-testid":"create-schedule",get href(){return e(Se)},get disabled(){return e(Pe)},children:(Ie,Ne)=>{re();var Fe=ce();R(We=>q(Fe,We),[()=>o("schedules.create")],r),t(Ie,Fe)},$$slots:{default:!0}})};O(ie,j=>{e(te)||j(Q)})}t(s,u)};O(L,s=>{e(g)&&s(k)})}m(y),m(a),t(I,a)},headers:(I,U)=>{var a=Zt();xe(a,5,()=>e(ee),Ee,(v,g)=>{let h=()=>e(g).label;var l=Xt(),y=b(l,!0);m(l),R(()=>q(y,h())),t(v,l)}),m(a),t(I,a)},empty:(I,U)=>{var a=qe(),v=ae(a);{var g=l=>{const y=r(()=>o("schedules.empty-state-title"));je(l,{get title(){return e(y)},children:(L,k)=>{wt(L,{intent:"warning",icon:"warning",class:"mx-12",children:(s,u)=>{re();var i=ce();R(()=>q(i,e(D))),t(s,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},h=(l,y)=>{{var L=s=>{const u=r(()=>o("schedules.empty-state-title")),i=r(()=>o("schedules.empty-state-description"));je(s,{get title(){return e(u)},get content(){return e(i)}})},k=s=>{const u=r(()=>o("schedules.empty-state-title"));je(s,{get title(){return e(u)},children:(i,ie)=>{var Q=es(),j=ae(Q),Se=b(j),Pe=Z(Se);ze(Pe,{newTab:!0,href:"https://docs.temporal.io/workflows/#schedule",children:(X,be)=>{re();var ve=ce();R(Ye=>q(ve,Ye),[()=>o("schedules.getting-started-docs-link")],r),t(X,ve)},$$slots:{default:!0}});var Ie=Z(Pe),Ne=Z(Ie);ze(Ne,{newTab:!0,href:"https://docs.temporal.io/cli/schedule",children:(X,be)=>{re();var ve=ce("Temporal CLI");t(X,ve)},$$slots:{default:!0}}),re(),m(j);var Fe=Z(j,2);{var We=X=>{const be=r(()=>!Ge());Ue(X,{"data-testid":"create-schedule",get disabled(){return e(be)},$$events:{click:()=>at(Qe({namespace:e(P)}))},children:(ve,Ye)=>{re();var Ke=ce();R(Ze=>q(Ke,Ze),[()=>o("schedules.create")],r),t(ve,Ke)},$$slots:{default:!0}})};O(Fe,X=>{e(te)||X(We)})}R((X,be)=>{q(Se,`${X??""} `),q(Ie,` ${be??""} `)},[()=>o("schedules.getting-started-docs-link-preface"),()=>o("schedules.getting-started-cli-link-preface")],r),t(i,Q)},$$slots:{default:!0}})};O(l,s=>{e(B)?s(L):s(k,!1)},y)}};O(v,l=>{e(D)?l(g):l(h,!1)})}t(I,a)},"actions-end-additional":(I,U)=>{Ct(I,{text:"Configure Columns",top:!0,children:(a,v)=>{Ue(a,{"data-testid":"workflows-summary-table-configuration-button",size:"xs",variant:"ghost",$$events:{click:pe},children:(g,h)=>{yt(g,{name:"settings"})},$$slots:{default:!0}})},$$slots:{default:!0}})}}})});var se=Z(Ae,2);const le=r(()=>o("common.columns")),he=r(()=>o("common.schedules-table"));ht(se,{get availableColumns(){return e(p)},get table(){return gt.SCHEDULES},get type(){return e(le)},get title(){return e(he)},get open(){return e(G)},set open(z){n(G,z)},$$legacy:!0}),t(Y,Te),ye(),V()}var rs=_("<!> <!>",1);function Hs(Y,E){we(E,!1);const[f,V]=Le(),T=()=>F(Re,"$page",f);ke();var A=rs(),S=ae(A);const d=r(()=>`Schedules | ${T().params.namespace}`);st(S,{get title(){return e(d)},get url(){return T().url.href}});var w=Z(S,2);ss(w,{}),t(Y,A),ye(),V()}export{Hs as component};
