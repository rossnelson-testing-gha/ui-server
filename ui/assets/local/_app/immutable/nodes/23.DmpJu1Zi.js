import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as G,e,r as t,c as a,t as E,d as O,b as J,n as ne,g as s,l as ee,s as S,ag as we,a as le,m as M,f as te}from"../chunks/Dv5jDC8Z.js";import{a as C,t as N,b as pe,c as ze}from"../chunks/BM_uyzAk.js";import{i as Q}from"../chunks/CM2QeVoh.js";import{s as W,a as H,b as ke}from"../chunks/CEr_ApTH.js";import{p as Te}from"../chunks/DUbvhX2N.js";import{P as Re}from"../chunks/PLLlBlGt.js";import{t as v}from"../chunks/CZMG2GAD.js";import{s as r}from"../chunks/CnnFVxmh.js";import{a as je}from"../chunks/Cr1-wnh-.js";import{k as Ce}from"../chunks/ehIHThNH.js";import{p as K}from"../chunks/BbkaS_Cl.js";import{f as se,t as Oe,r as Pe}from"../chunks/9czO_RoD.js";import{i as Ie}from"../chunks/FbCjvpNA.js";import{c as Fe}from"../chunks/s0RhsljA.js";import{B as Be}from"../chunks/BXfWvgor.js";import{T as Ae}from"../chunks/Cf5tKryT.js";import{T as Se}from"../chunks/CcIHoDhR.js";import{a as ae,d as Ue}from"../chunks/CZEx-o8_.js";import{d as Z,s as De}from"../chunks/wdddUT-U.js";import{C as ie}from"../chunks/DV_BD6lz.js";import{L as Me}from"../chunks/JRCi7r2-.js";import{s as Ne}from"../chunks/Bejpy5M8.js";var Le=N('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div></div>');function qe(T,h){G(h,!1);const[d,w]=W(),u=()=>H(Oe,"$timeFormat",d),l=()=>H(Pe,"$relativeTime",d);let i=K(h,"operation",8);Q();var n=Le(),b=e(n),g=e(b,!0);t(b);var f=a(b,2),p=e(f),$=e(p,!0);t(p);var R=a(p,2),I=e(R,!0);t(R),t(f);var y=a(f,2),c=e(y),z=e(c,!0);t(c);var x=a(c,2),o=e(x,!0);t(x),t(y);var m=a(y,2),_=e(m),P=e(_,!0);t(_);var j=a(_,2),U=e(j,!0);t(j),t(m);var k=a(m,2),F=e(k),D=e(F,!0);t(F);var B=a(F,2),A=e(B,!0);t(B),t(k);var L=a(k,2),q=e(L),X=e(q,!0);t(q);var V=a(q,2),ce=e(V,!0);t(V),t(L);var re=a(L,2),Y=e(re),ve=e(Y,!0);t(Y);var oe=a(Y,2),de=e(oe,!0);t(oe),t(re),t(n),E((ue,fe,me,_e,he,be,ge,xe,$e,ye)=>{r(g,ue),r($,fe),r(I,i().operationType),r(z,me),r(o,i().identity),r(P,_e),r(U,i().reason),r(D,he),r(A,be),r(X,ge),r(ce,xe),r(ve,$e),r(de,ye)},[()=>v("batch.details"),()=>v("batch.operation-type"),()=>v("batch.identity"),()=>v("common.reason"),()=>v("common.start-time"),()=>se(i().startTime,u(),{relative:l()}),()=>v("common.close-time"),()=>se(i().closeTime,u(),{relative:l()}),()=>v("batch.total-operations"),()=>Intl.NumberFormat("en-US").format(i().totalOperationCount)],O),C(T,n),J(),w()}var Ee=N('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function He(T,h){G(h,!1);const[d,w]=W(),u=()=>H(ae,"$autoRefresh",d);let l=K(h,"operation",8);const i=Fe(),n=o=>{const{checked:m}=o.target;i("toggleAutoRefresh",{checked:m}),ke(ae,m)},b={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};Q();var g=Ee(),f=e(g),p=e(f),$=e(p),R=e($,!0);t($);var I=a($,2);Be(I,{get type(){return b[l().state]},children:(o,m)=>{ne();var _=pe();E(()=>r(_,l().state)),C(o,_)},$$slots:{default:!0}}),t(p);var y=a(p,2),c=e(y,!0);t(y),t(f);var z=a(f,2);{var x=o=>{const m=O(()=>v("common.auto-refresh-tooltip",{interval:"5"}));Se(o,{top:!0,get text(){return s(m)},children:(_,P)=>{const j=O(()=>v("common.auto-refresh"));Ae(_,{id:"batch-operation-auto-refresh",get label(){return s(j)},labelPosition:"left",get checked(){return u()},$$events:{change:n}})},$$slots:{default:!0}})};Ie(z,o=>{l().state==="Running"&&o(x)})}t(g),E(o=>{r(R,o),r(c,l().jobId)},[()=>v("batch.describe-page-title")],O),C(T,g),J(),w()}var Ke=N('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class=" text-xs font-semibold text-green-700"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Ge(T,h){G(h,!1);let d=K(h,"operation",8),w=M(),u=M(),l=M();ee(()=>we(d()),()=>{const{completeOperationCount:D,failureOperationCount:B,totalOperationCount:A}=d();S(w,Math.round(D/A*100)),S(u,Math.round(B/A*100)),S(l,Math.round((D+B)/A*100))}),le(),Q();var i=Ke(),n=e(i),b=e(n,!0);t(n);var g=a(n,2),f=e(g),p=e(f),$=e(p,!0);t(p);var R=a(p,2),I=e(R);t(R),t(f);var y=a(f,2),c=e(y);t(y),t(g);var z=a(g,2),x=e(z),o=e(x),m=e(o,!0);t(o);var _=a(o,2);let P;var j=e(_,!0);t(_),t(x);var U=a(x,2),k=e(U),F=a(k,2);t(U),t(z),t(i),E((D,B,A,L,q,X,V)=>{r(b,D),r($,B),r(I,`${A??""} / ${L??""}`),Z(c,`width:${s(l)??""}%;`),r(m,q),P=De(_,1," text-xs font-semibold",null,P,X),r(j,V),Z(k,`width:${s(w)??""}%;`),Z(F,`width:${s(u)??""}%;`)},[()=>v("batch.results"),()=>v("batch.operations-progress",{percent:s(l)}),()=>Intl.NumberFormat("en-US").format(d().completeOperationCount),()=>Intl.NumberFormat("en-US").format(d().totalOperationCount),()=>v("batch.operations-succeeded",{count:d().completeOperationCount}),()=>({"text-red-700":s(u)>0}),()=>v("batch.operations-failed",{count:d().failureOperationCount})],O),C(T,i),J()}var Je=N("<!> <!> <!>",1),Qe=N('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Ve(T,h){G(h,!1);const[d,w]=W(),u=()=>H(ae,"$autoRefresh",d);let l=K(h,"namespace",8),i=K(h,"jobId",8),n=M(0),b;const g=c=>{c.detail.checked?S(n,s(n)+1):b&&window.clearTimeout(b)},f=()=>Ue({jobId:i(),namespace:l()}).then(c=>(u()&&c.state==="Running"&&(b=window.setTimeout(()=>{S(n,s(n)+1)},5e3)),c));Q();var p=Qe(),$=e(p),R=e($);const I=O(()=>Ne({namespace:l()}));Me(R,{get href(){return s(I)},icon:"chevron-left",children:(c,z)=>{ne();var x=pe();E(o=>r(x,o),[()=>v("batch.back-link")],O),C(c,x)},$$slots:{default:!0}}),t($);var y=a($,2);Ce(y,()=>s(n),c=>{var z=ze(),x=te(z);je(x,f,null,(o,m)=>{var _=Je(),P=te(_);He(P,{get operation(){return s(m)},$$events:{toggleAutoRefresh:g}});var j=a(P,2);ie(j,{children:(k,F)=>{qe(k,{get operation(){return s(m)}})},$$slots:{default:!0}});var U=a(j,2);ie(U,{children:(k,F)=>{Ge(k,{get operation(){return s(m)}})},$$slots:{default:!0}}),C(o,_)}),C(c,z)}),t(p),C(T,p),J(),w()}var We=N("<!> <!>",1);function $t(T,h){G(h,!1);const[d,w]=W(),u=()=>H(Te,"$page",d),l=M(),i=M();ee(()=>u(),()=>{S(l,u().params.namespace)}),ee(()=>u(),()=>{S(i,u().params.jobId)}),le(),Q();var n=We(),b=te(n);const g=O(()=>v("batch.describe-page-title")),f=O(()=>s(i));Re(b,{get title(){return`${s(g)??""} | ${s(f)??""}`}});var p=a(b,2);Ve(p,{get jobId(){return s(i)},get namespace(){return s(l)}}),C(T,n),J(),w()}export{$t as component};
