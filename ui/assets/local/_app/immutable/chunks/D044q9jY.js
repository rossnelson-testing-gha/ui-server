import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as I,b as R,g as n,s as r,t as _,d as i,m as g,e as v,r as h,c as K}from"./Dv5jDC8Z.js";import{s as b}from"./CnnFVxmh.js";import{a as x,t as $}from"./BM_uyzAk.js";import{i as q}from"./CM2QeVoh.js";import{p as d}from"./BbkaS_Cl.js";import{s as H,b as N}from"./CEr_ApTH.js";import{M as j}from"./BrRT_WLE.js";import{t as o}from"./CZMG2GAD.js";import{h as L,t as O}from"./b_7paoiC.js";import{t as z}from"./S8vTd6-A.js";import{i as B}from"./NVQ_snmQ.js";import{I as Q}from"./DoCHWZ4f.js";var S=$('<h3 slot="title"> </h3>'),U=$("<p> </p>");function de(a,t){I(t,!1);const[p,y]=H();let f=d(t,"open",12),T=d(t,"workflow",8),D=d(t,"namespace",8),W=d(t,"refresh",8),c=g(),m=g("");const w=async()=>{r(m,""),r(c,!0);try{await L({namespace:D(),workflow:T()}),f(!1),N(W(),Date.now()),z.push({id:"workflow-cancelation-success-toast",message:o("workflows.cancel-success")})}catch(s){r(m,B(s)?s.message:o("common.unknown-error"))}finally{r(c,!1)}};q();const M=i(()=>o("common.confirm")),C=i(()=>o("common.cancel"));j(a,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return n(M)},get cancelText(){return n(C)},get loading(){return n(c)},confirmType:"destructive",get error(){return n(m)},set error(s){r(m,s)},get open(){return f()},set open(s){f(s)},$$events:{confirmModal:w},$$slots:{title:(s,E)=>{var e=S(),u=v(e,!0);h(e),_(l=>b(u,l),[()=>o("workflows.cancel-modal-title")],i),x(s,e)},content:(s,E)=>{var e=U(),u=v(e,!0);h(e),_(l=>b(u,l),[()=>o("workflows.cancel-modal-confirmation")],i),x(s,e)}},$$legacy:!0}),R(),y()}var V=$('<h3 slot="title"> </h3>'),X=$('<div slot="content"><p> </p> <!></div>');function pe(a,t){I(t,!1);const[p,y]=H();let f=d(t,"open",12),T=d(t,"workflow",8),D=d(t,"namespace",8),W=d(t,"refresh",8),c=g(""),m=g(""),w=g(!1);const M=()=>{f(!1),r(c,"")},C=async()=>{r(m,""),r(w,!0);try{await O({workflow:T(),namespace:D(),reason:n(c)}),f(!1),r(c,""),N(W(),Date.now()),z.push({id:"workflow-termination-success-toast",message:o("workflows.terminate-success")})}catch(e){r(m,B(e)?e.message:o("common.unknown-error"))}finally{r(w,!1)}};q();const s=i(()=>o("workflows.terminate")),E=i(()=>o("common.cancel"));j(a,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get loading(){return n(w)},get confirmText(){return n(s)},get cancelText(){return n(E)},confirmType:"destructive",get error(){return n(m)},set error(e){r(m,e)},get open(){return f()},set open(e){f(e)},$$events:{cancelModal:M,confirmModal:C},$$slots:{title:(e,u)=>{var l=V(),k=v(l,!0);h(l),_(P=>b(k,P),[()=>o("workflows.terminate-modal-title")],i),x(e,l)},content:(e,u)=>{var l=X(),k=v(l),P=v(k,!0);h(k);var F=K(k,2);const G=i(()=>o("common.reason-placeholder")),J=i(()=>o("common.reason-placeholder"));Q(F,{id:"workflow-termination-reason",class:"mt-4",get placeholder(){return n(G)},get label(){return n(J)},labelHidden:!0,get value(){return n(c)},set value(A){r(c,A)},$$legacy:!0}),h(l),_(A=>b(P,A),[()=>o("workflows.terminate-modal-confirmation")],i),x(e,l)}},$$legacy:!0}),R(),y()}const we=(a,t,p)=>!a.disableWriteActions&&!a.workflowCancelDisabled&&!t.namespaceWriteDisabled(p),ue=(a,t,p)=>!a.disableWriteActions&&!a.workflowResetDisabled&&!t.namespaceWriteDisabled(p),ke=(a,t,p)=>!a.disableWriteActions&&!a.workflowTerminateDisabled&&!t.namespaceWriteDisabled(p);export{de as C,pe as T,ke as a,ue as b,we as w};
