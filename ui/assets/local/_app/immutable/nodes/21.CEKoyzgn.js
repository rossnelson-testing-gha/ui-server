import{f as Oe}from"../chunks/D0lTzxXq.js";import{k as Ke,l as Ce}from"../chunks/BusX7ieA.js";import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as me,l as be,s as R,ag as ge,a as ye,f as Z,e as h,g as e,r as b,c as p,n as H,t as j,d as a,b as pe,m as ae,i as Ge}from"../chunks/Dv5jDC8Z.js";import{s as y}from"../chunks/CnnFVxmh.js";import{i as ne}from"../chunks/FbCjvpNA.js";import{e as Pe,i as De}from"../chunks/CocFUsaO.js";import{b as re,a as v,t as M,c as he}from"../chunks/BM_uyzAk.js";import{i as fe}from"../chunks/CM2QeVoh.js";import{p as K,l as He}from"../chunks/BbkaS_Cl.js";import{s as ke,a as ie,m as Me,b as Xe}from"../chunks/CEr_ApTH.js";import{p as xe}from"../chunks/C4EHgxxn.js";import{P as Ve}from"../chunks/PLLlBlGt.js";import{a as Re}from"../chunks/wdddUT-U.js";import{e as ee}from"../chunks/C1S4hUbu.js";import{p as Be,s as Ze}from"../chunks/Bfc47y5P.js";import{W as Je}from"../chunks/uFOGAOV_.js";import{F as Fe}from"../chunks/BPXwvZFo.js";import{L as Ee}from"../chunks/Do7dxYOJ.js";import{b as Ye,T as et,a as tt}from"../chunks/BFBdxoz9.js";import{t}from"../chunks/CZMG2GAD.js";import{f as ve,t as Ie,r as rt}from"../chunks/9czO_RoD.js";import{j as at,k as ot,l as st,m as lt,n as nt}from"../chunks/Be5fLl4T.js";import{t as it}from"../chunks/CwWuMyGH.js";import{s as ct}from"../chunks/HNIa2swf.js";import{b as ut}from"../chunks/Df1CJasG.js";import{u as Ne}from"../chunks/BRmgPntg.js";import{s as mt}from"../chunks/CevXMagP.js";import{C as Se}from"../chunks/uEljFHmr.js";import{E as pt}from"../chunks/lbyfKwPg.js";import{P as ft}from"../chunks/DlexLhj4.js";import{g as dt}from"../chunks/B4zHjFCP.js";import{b as Ae}from"../chunks/ZOBUq9Fo.js";import{g as vt}from"../chunks/CTBtQUu0.js";import{B as wt}from"../chunks/o0T750pR.js";import{I as Qe}from"../chunks/Bo_XoIf4.js";import{F as qe,S as ue,a as _t}from"../chunks/Bq8KodY4.js";import{d as gt}from"../chunks/BGl1DbLa.js";const ht=async function({params:f,url:r}){var C,X,_,F,u,k,g,E;const{searchParams:i}=r;i.has("time-range")||i.set("time-range","1 day");const w=i.get("workflow-id"),s=i.get("workflow-type"),o=i.get("time-range"),l=i.get("status"),c=await Oe(f.namespace),T=(_=(X=(C=c.config)==null?void 0:C.historyArchivalUri)==null?void 0:X.toLowerCase())==null?void 0:_.startsWith("s3://"),n=(k=(u=(F=c.config)==null?void 0:F.historyArchivalUri)==null?void 0:u.toLowerCase())==null?void 0:k.startsWith("gs://"),d=T||n,B=d?{}:{workflowId:w,workflowType:s,closeTime:o,executionStatus:l},q=((g=c==null?void 0:c.config)==null?void 0:g.historyArchivalState)==="Enabled",N=((E=c==null?void 0:c.config)==null?void 0:E.visibilityArchivalState)==="Enabled",Q=q&&N?await Ke(f.namespace,B,fetch):null;return{workflows:Q?Q.workflows:[],namespace:c,archivalEnabled:q,visibilityArchivalEnabled:N,archivalQueryingNotSupported:d}},Cr=Object.freeze(Object.defineProperty({__proto__:null,load:ht},Symbol.toStringTag,{value:"Module"})),$e=f=>r=>r.toLowerCase()===f.toLowerCase(),we=(f,r)=>f[r+2],bt=f=>{if(f){for(const r of st)if(f[r])return{[r]:f[r]}}},yt=$e("WorkflowType"),kt=$e("WorkflowId"),xt=$e("StartTime"),$t=$e("ExecutionStatus"),Tt=f=>{const r=it(f),i={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return r.forEach((w,s)=>{if(kt(w)&&(i.workflowId=we(r,s)),yt(w)&&(i.workflowType=we(r,s)),$t(w)){const o=we(r,s);ct(o)&&(i.executionStatus=o)}if(xt(w)){const o=we(r,s);try{const l=at(o),c=bt(l);i.timeRange=ot(c)}catch(l){console.error("Error parsing StartTime from query",l)}}}),i};var St=M('<td><!></td> <td class="relative break-words pr-4"><!> <!> <p class="inline-time-cell svelte-1haww6m"> </p></td> <td class="relative truncate"><h3 class="md:hidden"> </h3> <button class="table-link"> </button> <!> <p class="inline-time-cell svelte-1haww6m"> </p></td> <td class="time-cell svelte-1haww6m"><p> </p></td> <td class="time-cell svelte-1haww6m"><p> </p></td>',1);function Pt(f,r){me(r,!1);const[i,w]=ke(),s=()=>ie(xe,"$page",i),o=()=>ie(Ie,"$timeFormat",i),l=()=>ie(rt,"$relativeTime",i),c=ae();let T=K(r,"namespace",8),n=K(r,"workflow",8),d=ae(!1);const B=q=>{const N=Ce({timeRange:"All"}),Q=s().url.searchParams.get("query"),C=Tt(Q??N),X=(C==null?void 0:C.workflowType)===q?"":q,_=Ce({...C,workflowType:X});Ne({url:s().url,parameter:"query",value:_,allowEmpty:!0})};be(()=>(ge(T()),ge(n())),()=>{R(c,ut({namespace:T(),workflow:n().id,run:n().runId}))}),ye(),fe(),Ye(f,{class:"hover:bg-interactive-table-hover",children:(q,N)=>{var Q=St(),C=Z(Q),X=h(C);const _=a(()=>lt(n().startTime));Je(X,{get status(){return n().status},get delay(){return e(_)}}),b(C);var F=p(C,2),u=h(F);Ee(u,{get href(){return e(c)},children:(oe,ce)=>{H();var le=re();j(()=>y(le,n().id)),v(oe,le)},$$slots:{default:!0}});var k=p(u,2);const g=a(()=>t("common.copy-icon-title")),E=a(()=>t("common.copy-success-icon-title")),S=a(()=>t("common.filter-workflows"));Fe(k,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(E)},get filterIconTitle(){return e(S)},get show(){return e(d)},get content(){return n().id},filterable:!1});var G=p(k,2),U=h(G,!0);b(G),b(F);var m=p(F,2),P=h(m),V=h(P);b(P);var z=p(P,2),te=h(z,!0);b(z);var W=p(z,2);const J=a(()=>t("common.copy-icon-title")),x=a(()=>t("common.copy-success-icon-title")),A=a(()=>t("common.filter-workflows")),L=a(()=>{var oe,ce,le;return(le=(ce=(oe=s().url)==null?void 0:oe.searchParams)==null?void 0:ce.get("query"))==null?void 0:le.includes(n().name)});Fe(W,{get copyIconTitle(){return e(J)},get copySuccessIconTitle(){return e(x)},get filterIconTitle(){return e(A)},get show(){return e(d)},get content(){return n().name},onFilter:()=>B(n().name),get filtered(){return e(L)}});var I=p(W,2),D=h(I,!0);b(I),b(m);var O=p(m,2),$=h(O),Y=h($,!0);b($),b(O);var se=p(O,2),de=h(se),Te=h(de,!0);b(de),b(se),j((oe,ce,le,Ue,je,ze)=>{y(U,oe),y(V,`${ce??""}:`),Re(z,"aria-label",le),y(te,n().name),y(D,Ue),y(Y,je),y(Te,ze)},[()=>ve(n().startTime,o(),{relative:l()}),()=>t("workflows.workflow-name"),()=>t("workflows.filter-by",{workflowName:n().name}),()=>ve(n().endTime,o(),{relative:l()}),()=>ve(n().startTime,o(),{relative:l()}),()=>ve(n().endTime,o(),{relative:l()})],a),ee("mouseover",F,()=>R(d,!0)),ee("focus",F,()=>R(d,!0)),ee("mouseleave",F,()=>R(d,!1)),ee("blur",F,()=>R(d,!1)),ee("click",z,Be(Ze(()=>B(n().name)))),ee("mouseover",m,()=>R(d,!0)),ee("focus",m,()=>R(d,!0)),ee("mouseleave",m,()=>R(d,!1)),ee("blur",m,()=>R(d,!1)),v(q,Q)},$$slots:{default:!0}}),pe(),w()}var Et=M('<caption class="sr-only" slot="caption">Workflows</caption>'),It=M('<th class="w-32 max-md:hidden">Status</th> <th class="max-md:hidden md:w-auto">Workflow ID</th> <th class="w-60 max-md:hidden">Type</th> <th class="w-60 max-xl:hidden">Start</th> <th class="w-60 max-xl:hidden">End</th> <th class="md:hidden" colspan="3">Summary</th>',1);function Ct(f,r){let i=K(r,"updating",8,!1);et(f,{class:"w-full md:table-fixed",get updating(){return i()},"data-testid":"workflows-table",children:(w,s)=>{var o=he(),l=Z(o);mt(l,r,"default",{},null),v(w,o)},$$slots:{default:!0,caption:(w,s)=>{var o=Et();v(w,o)},headers:(w,s)=>{tt(w,{slot:"headers",children:(o,l)=>{var c=It();H(10),v(o,c)},$$slots:{default:!0}})}}})}var _e={exports:{}},We;function Ft(){return We||(We=1,function(f,r){var i=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,w=/-[a-z\u00E0-\u00F6\u00F8-\u00FE]/g;f.exports=r=function(o){return o.replace(i,function(l){return"-"+l.toLowerCase()})},r.reverse=function(s){return s.replace(w,function(o){return o.slice(1).toUpperCase()})}}(_e,_e.exports)),_e.exports}var At=Ft();const qt=vt(At);var Wt=M('<form role="search" class="flex items-center"><!></form>');function Lt(f,r){const i=He(r,["children","$$slots","$$events","$$legacy"]);me(r,!1);let w=K(r,"placeholder",24,()=>`${t("common.search")}â€¦`),s=K(r,"label",24,()=>t("common.search")),o=K(r,"value",8,""),l=K(r,"name",8,"query"),c=K(r,"icon",8,!1),T=K(r,"id",24,()=>qt(`${s()}-${l()}`)),n=i["data-testid"]||T();fe();var d=Wt();Re(d,"data-testid",`${n}-form`);var B=h(d);const q=a(()=>c()?"search":null);Qe(B,{class:"w-full",get label(){return s()},get id(){return T()},labelHidden:!0,get icon(){return e(q)},type:"search",get name(){return l()},get value(){return o()},get placeholder(){return w()},"data-testid":`${n}-input`,$$events:{input(N){Ae.call(this,r,N)}},$$slots:{"after-input":(N,Q)=>{wt(N,{slot:"after-input",type:"submit","data-testid":`${n}-button`,children:(C,X)=>{H();var _=re();j(()=>y(_,s())),v(C,_)},$$slots:{default:!0}})}}}),b(d),ee("submit",d,Be(function(N){Ae.call(this,r,N)})),v(f,d),pe()}function Le(f,r){me(r,!1);const[i,w]=ke(),s=()=>ie(xe,"$page",i);let o=K(r,"parameter",8),l=K(r,"name",8),c=K(r,"value",8),T=ae(o()&&s().url.searchParams.get(o())||c());const n=`${o()||l()}-filter`,d=gt(Ne,300);be(()=>(ge(o()),e(T),s()),()=>{d({parameter:o(),value:e(T),url:s().url})}),ye(),fe(),Qe(f,{type:"search",icon:"search",get label(){return l()},labelHidden:!0,get placeholder(){return l()},id:n,get value(){return e(T)},set value(B){R(T,B)},$$legacy:!0}),pe(),w()}var Dt=M("<!> <!> <!>",1),Rt=M('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-5" role="search"><!> <!> <!> <!> <!></div>'),Bt=M('<section class="flex flex-col gap-2"><p class="text-right text-xs"><!></p> <!></section>');function Nt(f,r){me(r,!1);const[i,w]=ke(),s=()=>ie(xe,"$page",i),o=()=>ie(Ie,"$timeFormat",i),l=ae(),c={All:{value:null,label:t("workflows.all-statuses")},"Timed Out":{value:"TimedOut",label:t("workflows.timed-out")},Completed:{value:"Completed",label:t("workflows.completed")},Failed:{value:"Failed",label:t("workflows.failed")},"Continued as New":{value:"ContinuedAsNew",label:t("workflows.continued-as-new")},Canceled:{value:"Canceled",label:t("workflows.canceled")},Terminated:{value:"Terminated",label:t("workflows.terminated")}};let T="",n="";const d=u=>{const g=new FormData(u.target).get("query");s().url.searchParams.set("query",String(g)),dt(s().url.toString())};be(()=>s(),()=>{R(l,s().url.searchParams.has("query"))}),ye(),fe();var B=Bt(),q=h(B),N=h(q);{var Q=u=>{Ee(u,{get href(){return s().url.pathname},children:(k,g)=>{H();var E=re();j(S=>y(E,S),[()=>t("workflows.basic-search")],a),v(k,E)},$$slots:{default:!0}})},C=u=>{const k=a(()=>`${s().url.pathname}?query=`);Ee(u,{get href(){return e(k)},children:(g,E)=>{H();var S=re();j(G=>y(S,G),[()=>t("workflows.advanced-search")],a),v(g,S)},$$slots:{default:!0}})};ne(N,u=>{e(l)?u(Q):u(C,!1)})}b(q);var X=p(q,2);{var _=u=>{const k=a(()=>t("common.search")),g=a(()=>s().url.searchParams.get("query"));Lt(u,{icon:!0,get placeholder(){return e(k)},get value(){return e(g)},$$events:{submit:d}})},F=u=>{var k=Rt(),g=h(k);const E=a(()=>t("common.workflow-id"));Le(g,{parameter:"workflow-id",get name(){return e(E)},value:T});var S=p(g,2);const G=a(()=>t("common.workflow-type"));Le(S,{parameter:"workflow-type",get name(){return e(G)},value:n});var U=p(S,2);const m=a(()=>t("workflows.time-range"));qe(U,{get label(){return e(m)},parameter:"time-range",value:"24 hours",children:(W,J)=>{var x=he(),A=Z(x);Pe(A,1,()=>nt,De,(L,I)=>{ue(L,{get value(){return e(I)},children:(D,O)=>{H();var $=re();j(()=>y($,e(I))),v(D,$)},$$slots:{default:!0}})}),v(W,x)},$$slots:{default:!0}});var P=p(U,2);const V=a(()=>t("common.status"));qe(P,{get label(){return e(V)},parameter:"status",value:null,children:(W,J)=>{var x=he(),A=Z(x);Pe(A,1,()=>Object.values(c),({value:L,label:I})=>I,(L,I)=>{let D=()=>e(I).value,O=()=>e(I).label;ue(L,{get value(){return D()},children:($,Y)=>{H();var se=re();j(()=>y(se,O())),v($,se)},$$slots:{default:!0}})}),v(W,x)},$$slots:{default:!0}});var z=p(P,2);const te=a(()=>t("common.time"));_t(z,{id:"filter-by-relative-time",get label(){return e(te)},get value(){return Me(),o()},set value(W){Xe(Ie,W)},children:(W,J)=>{var x=Dt(),A=Z(x);ue(A,{value:"relative",children:(D,O)=>{H();var $=re();j(Y=>y($,Y),[()=>t("common.relative")],a),v(D,$)},$$slots:{default:!0}});var L=p(A,2);ue(L,{value:"UTC",children:(D,O)=>{H();var $=re();j(Y=>y($,Y),[()=>t("common.utc")],a),v(D,$)},$$slots:{default:!0}});var I=p(L,2);ue(I,{value:"local",children:(D,O)=>{H();var $=re();j(Y=>y($,Y),[()=>t("common.local")],a),v(D,$)},$$slots:{default:!0}}),v(W,x)},$$slots:{default:!0},$$legacy:!0}),b(k),v(u,k)};ne(X,u=>{e(l)?u(_):u(F,!1)})}b(B),v(f,B),pe(),w()}var Qt=M('<h1 data-testid="archived-enabled-title"> </h1> <!> <!>',1),Ut=M('<h1 data-testid="visibility-disabled-title"> </h1> <p> <a class="text-blue-700 underline" href="https://docs.temporal.io/clusters#archival" target="_blank" rel="noreferrer"> </a>:</p> <!>',1),jt=M('<p> <a class="text-blue-700 underline" href="https://docs.temporal.io/clusters#archival" target="_blank" rel="noreferrer"> </a>:</p> <!>',1),zt=M('<h1 data-testid="archived-disabled-title"> </h1> <p> </p> <!> <!>',1),Ot=M("<!> <!>",1);function Fr(f,r){me(r,!1);const[i,w]=ke(),s=()=>ie(xe,"$page",i),o=ae(),l=ae(),c=ae(),T=ae(),n=ae();let d=K(r,"data",8);be(()=>(e(o),e(l),e(c),e(T),e(n),ge(d())),()=>{(_=>(R(o,_.namespace.namespaceInfo.name),R(l,_.workflows),R(c,_.archivalEnabled),R(T,_.visibilityArchivalEnabled),R(n,_.archivalQueryingNotSupported)))(d())}),ye(),fe();var B=Ot(),q=Z(B);const N=a(()=>`${t("workflows.archival")} | ${e(o)}`);Ve(q,{get title(){return e(N)},get url(){return s().url.href}});var Q=p(q,2);{var C=_=>{var F=Qt(),u=Z(F),k=h(u,!0);b(u);var g=p(u,2);{var E=m=>{Nt(m,{})};ne(g,m=>{e(n)||m(E)})}var S=p(g,2);{var G=m=>{const P=a(()=>t("workflows.archived-workflows")),V=a(()=>t("common.per-page")),z=a(()=>t("common.previous")),te=a(()=>t("common.next"));ft(m,{get items(){return e(l)},get"aria-label"(){return e(P)},get pageSizeSelectLabel(){return e(V)},get previousButtonLabel(){return e(z)},get nextButtonLabel(){return e(te)},children:Ge,$$slots:{default:(W,J)=>{const x=a(()=>J.visibleItems);Ct(W,{children:(A,L)=>{var I=he(),D=Z(I);Pe(D,1,()=>e(x),De,(O,$)=>{Pt(O,{get workflow(){return e($)},get namespace(){return e(o)}})}),v(A,I)},$$slots:{default:!0}})}}})},U=m=>{const P=a(()=>t("workflows.workflow-empty-state-title")),V=a(()=>t("workflows.archival-empty-state-description"));pt(m,{get title(){return e(P)},get content(){return e(V)}})};ne(S,m=>{var P;(P=e(l))!=null&&P.length?m(G):m(U,!1)})}j(m=>y(k,m),[()=>t("workflows.archived-workflows")],a),v(_,F)},X=(_,F)=>{{var u=g=>{var E=Ut(),S=Z(E),G=h(S,!0);b(S);var U=p(S,2),m=h(U,!0),P=p(m),V=h(P,!0);b(P),H(),b(U);var z=p(U,2);const te=a(()=>`temporal operator namespace update --visibility-archival-state enabled ${e(o)}`),W=a(()=>t("common.copy-icon-title")),J=a(()=>t("common.copy-success-icon-title"));Se(z,{get content(){return e(te)},language:"text",inline:!0,get copyIconTitle(){return e(W)},get copySuccessIconTitle(){return e(J)}}),j((x,A,L)=>{y(G,x),y(m,A),y(V,L)},[()=>t("workflows.visibility-disabled-archival"),()=>t("workflows.archival-link-preface"),()=>t("workflows.archival-link")],a),v(g,E)},k=g=>{var E=zt(),S=Z(E),G=h(S,!0);b(S);var U=p(S,2),m=h(U);b(U);var P=p(U,2);const V=a(()=>`temporal operator namespace update --history-archival-state enabled ${e(o)}`),z=a(()=>t("common.copy-icon-title")),te=a(()=>t("common.copy-success-icon-title"));Se(P,{get content(){return e(V)},language:"text",inline:!0,get copyIconTitle(){return e(z)},get copySuccessIconTitle(){return e(te)}});var W=p(P,2);{var J=x=>{var A=jt(),L=Z(A),I=h(L,!0),D=p(I),O=h(D,!0);b(D),H(),b(L);var $=p(L,2);const Y=a(()=>`temporal operator namespace update --visibility-archival-state enabled ${e(o)}`),se=a(()=>t("common.copy-icon-title")),de=a(()=>t("common.copy-success-icon-title"));Se($,{get content(){return e(Y)},language:"text",inline:!0,get copyIconTitle(){return e(se)},get copySuccessIconTitle(){return e(de)}}),j((Te,oe)=>{y(I,Te),y(O,oe)},[()=>t("workflows.archival-link-preface"),()=>t("workflows.archival-link")],a),v(x,A)};ne(W,x=>{e(T)||x(J)})}j((x,A)=>{y(G,x),y(m,`${A??""}:`)},[()=>t("workflows.archival-disabled-title"),()=>t("workflows.archival-disabled-details")],a),v(g,E)};ne(_,g=>{e(c)?g(u):g(k,!1)},F)}};ne(Q,_=>{e(c)&&e(T)?_(C):_(X,!1)})}v(f,B),pe(),w()}export{Fr as component,Cr as universal};
