import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as be,f as N,b as he,m as v,l as Y,a as Ye,t as K,g as e,s as p,d as a,e as _,c as o,r as x,n as H,ag as me}from"./Dv5jDC8Z.js";import{s as w}from"./CnnFVxmh.js";import{i as we}from"./FbCjvpNA.js";import{c as Z,a as f,t as ae,b as ee}from"./BM_uyzAk.js";import{s as te}from"./CevXMagP.js";import{i as ye}from"./CM2QeVoh.js";import{p as m}from"./BbkaS_Cl.js";import{s as $e,a as Ze,b as fe}from"./CEr_ApTH.js";import{a as et,w as tt}from"./s0RhsljA.js";import{p as at}from"./C4EHgxxn.js";import{A as nt}from"./CXRblWjG.js";import{C as ge}from"./DU0a6w13.js";import{I as ve}from"./Bo_XoIf4.js";import{E as rt}from"./DTSgVZfX.js";import{M as st}from"./UW-EhSyE.js";import{T as lt,a as _e}from"./DC2Lc4St.js";import{t as n}from"./CZMG2GAD.js";function ot(M,r){be(r,!1);const[ne,V]=$e(),Q=()=>Ze(at,"$page",ne);let A=m(r,"isCloud",8,!1);ye();var y=Z(),C=N(y);{var P=u=>{var l=Z(),d=N(l);te(d,r,"default",{},null),f(u,l)},T=u=>{var l=Z(),d=N(l);te(d,r,"fallback",{},null),f(u,l)};we(C,u=>{var l,d,$;A()||($=(d=(l=Q().data)==null?void 0:l.settings)==null?void 0:d.runtimeEnvironment)!=null&&$.isCloud?u(P):u(T,!1)})}f(M,y),he(),V()}const ke={spec:{name:"",descriptionString:"",target:{worker:{namespace:"",taskQueue:""}},allowedCallerNamespaces:[]}},xe=tt(ke);var it=ae('<div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!>',1),ut=ae("<!> <!>",1),dt=ae('<div class="flex w-full flex-col gap-4 xl:w-1/2"><!> <div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!> <!> <!> <!> <div><!> <p class="my-2 text-xs text-secondary">Do not include sensitive data.</p></div> <!></div> <!>',1);function Lt(M,r){be(r,!1);const[ne,V]=$e(),Q=v(),A=v();var y,C,P,T,u,l,d,$,j;let s=m(r,"endpoint",8,void 0),Ne=m(r,"targetNamespaceList",24,()=>[]),re=m(r,"callerNamespaceList",24,()=>[]),z=m(r,"error",8,void 0),Ce=m(r,"nameDisabled",8,!1),Pe=m(r,"isCloud",8,!0),Te=m(r,"nameHintText",8),se=m(r,"nameRegexPattern",8),k=v(((y=s()===null||s()===void 0?void 0:s().spec)===null||y===void 0?void 0:y.name)||""),q=v(((C=s()===null||s()===void 0?void 0:s().spec)===null||C===void 0?void 0:C.descriptionString)||""),L=v(((u=(T=(P=s()===null||s()===void 0?void 0:s().spec)===null||P===void 0?void 0:P.target)===null||T===void 0?void 0:T.worker)===null||u===void 0?void 0:u.namespace)||""),I=v((($=(d=(l=s()===null||s()===void 0?void 0:s().spec)===null||l===void 0?void 0:l.target)===null||d===void 0?void 0:d.worker)===null||$===void 0?void 0:$.taskQueue)||""),D=v(((j=s()===null||s()===void 0?void 0:s().spec)===null||j===void 0?void 0:j.allowedCallerNamespaces)||[]),E=v(!1);const qe=(t,g,c,i,b)=>{fe(xe,{spec:{name:t,descriptionString:g,target:{worker:{namespace:c,taskQueue:i}},allowedCallerNamespaces:b}})};et(()=>{fe(xe,ke)}),Y(()=>(e(k),e(q),e(L),e(I),e(D)),()=>{qe(e(k),e(q),e(L),e(I),e(D))}),Y(()=>me(re()),()=>{p(Q,re().map(t=>({value:t.namespace,label:t.namespace})))}),Y(()=>me(se()),()=>{p(A,t=>se().test(t))}),Ye(),ye();var le=dt(),B=N(le),oe=_(B);const Le=a(()=>!e(k)||!e(A)(e(k))),Ie=a(()=>n("nexus.endpoint-name")),De=a(()=>n("nexus.endpoint-name-placeholder"));ve(oe,{required:!0,get disabled(){return Ce()},get error(){return e(Le)},get hintText(){return Te()},get label(){return e(Ie)},id:"name",maxLength:255,get placeholder(){return e(De)},get value(){return e(k)},set value(t){p(k,t)},$$legacy:!0});var G=o(oe,2),J=_(G),Ee=_(J,!0);x(J);var ie=o(J,2),Re=_(ie,!0);x(ie),x(G);var ue=o(G,2);const Se=a(()=>n("nexus.target-namespace")),Ke=a(()=>n("common.no-results")),Qe=a(()=>!!e(L)),Ae=a(()=>n("nexus.select-namespace"));ge(ue,{get label(){return e(Se)},get noResultsText(){return e(Ke)},get valid(){return e(Qe)},error:"Please select a target Namespace.",required:!0,id:"target-namespace",get placeholder(){return e(Ae)},leadingIcon:"namespace-switcher",get options(){return Ne()},optionValueKey:"namespace",minSize:32,get value(){return e(L)},set value(t){p(L,t)},$$legacy:!0});var de=o(ue,2);const Fe=a(()=>!e(I)),He=a(()=>n("common.task-queue")),Me=a(()=>n("nexus.task-queue-placeholder"));ve(de,{required:!0,get error(){return e(Fe)},get label(){return e(He)},id:"task-queue",get placeholder(){return e(Me)},get value(){return e(I)},set value(t){p(I,t)},$$legacy:!0});var ce=o(de,2);ot(ce,{get isCloud(){return Pe()},children:(t,g)=>{var c=it(),i=N(c),b=_(i),U=_(b,!0);x(b);var F=o(b,2),R=_(F,!0);x(F),x(i);var W=o(i,2);const h=a(()=>n("nexus.allowed-caller-namespaces")),S=a(()=>n("common.no-results")),Ue=a(()=>!!e(D).length),We=a(()=>n("nexus.select-namespaces"));ge(W,{id:"caller-namespace-filter-menu",multiselect:!0,displayChips:!1,get options(){return e(Q)},get label(){return e(h)},leadingIcon:"search",get noResultsText(){return e(S)},get valid(){return e(Ue)},error:"Please select at least one Namespace.",get placeholder(){return e(We)},optionValueKey:"value",optionLabelKey:"label",get value(){return e(D)},set value(X){p(D,X)},$$legacy:!0}),K((X,Xe)=>{w(U,X),w(R,Xe)},[()=>n("nexus.access-policy"),()=>n("nexus.allowed-caller-namespaces-description")],a),f(t,c)},$$slots:{default:!0}});var pe=o(ce,2);lt(pe,{children:(t,g)=>{var c=ut(),i=N(c);const b=a(()=>e(E)===!1);_e(i,{get active(){return e(b)},"data-testid":"description-editor",$$events:{click:()=>p(E,!1)},children:(R,W)=>{H();var h=ee();K(S=>w(h,S),[()=>n("common.description")],a),f(R,h)},$$slots:{default:!0}});var U=o(i,2);const F=a(()=>e(E)===!0);_e(U,{get active(){return e(F)},"data-testid":"description-preview",$$events:{click:()=>p(E,!0)},children:(R,W)=>{H();var h=ee();K(S=>w(h,S),[()=>n("common.preview")],a),f(R,h)},$$slots:{default:!0}}),f(t,c)},$$slots:{default:!0}});var O=o(pe,2),Ve=_(O);{var je=t=>{st(t,{get content(){return e(q)}})},ze=t=>{rt(t,{get content(){return e(q)},$$events:{change:g=>p(q,g.detail.value)}})};we(Ve,t=>{e(E)?t(je):t(ze,!1)})}H(2),x(O);var Be=o(O,2);te(Be,r,"footer",{},null),x(B);var Ge=o(B,2);const Je=a(()=>{var t;return(t=z())==null?void 0:t.statusText}),Oe=a(()=>!z());nt(Ge,{get title(){return e(Je)},intent:"error",get hidden(){return e(Oe)},children:(t,g)=>{H();var c=ee();K(()=>{var i;return w(c,(i=z())==null?void 0:i.message)}),f(t,c)},$$slots:{default:!0}}),K((t,g)=>{w(Ee,t),w(Re,g)},[()=>n("nexus.target"),()=>n("nexus.target-description")],a),f(M,le),he(),V()}export{Lt as N,xe as e};
