import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ie,l as y,s as x,ag as B,g as e,a as ge,f as A,r as a,b as pe,m as b,e as p,t as C,d as i,n as ve,c as W,i as be}from"../chunks/Dv5jDC8Z.js";import{c as ne,a as o,t as $,b as fe}from"../chunks/BM_uyzAk.js";import{i as me}from"../chunks/CM2QeVoh.js";import{s as ce,a as G}from"../chunks/CEr_ApTH.js";import{p as de}from"../chunks/n8_2XRoA.js";import{P as $e}from"../chunks/PLLlBlGt.js";import{s as S}from"../chunks/CnnFVxmh.js";import{a as he}from"../chunks/Cr1-wnh-.js";import{e as le,i as ue}from"../chunks/CocFUsaO.js";import{s as we,c as ke}from"../chunks/wdddUT-U.js";import{i as oe}from"../chunks/FbCjvpNA.js";import{p as se}from"../chunks/BbkaS_Cl.js";import{L as _e}from"../chunks/b5fH8Wey.js";import{t}from"../chunks/CZMG2GAD.js";import{f as De,t as Pe,r as Fe}from"../chunks/9czO_RoD.js";import{m as ye,n as Ie}from"../chunks/FK2InMkP.js";import{f as Z}from"../chunks/UO4RgiCl.js";import{D as Le,a as Se}from"../chunks/CyOOFsNx.js";import{B as Ve}from"../chunks/DedCJQB9.js";import{I as Te}from"../chunks/CrYHGHR9.js";import{P as Be}from"../chunks/BSs5eS_A.js";import{d as Ce}from"../chunks/BOkQ1rrX.js";var We=$('<td class="p-2 text-left"><!></td>'),qe=$('<td class="whitespace-pre-line break-words p-2 text-left"> </td>'),je=$('<td class="whitespace-pre-line break-words p-2 text-center"><p><!></p></td>'),Ne=$("<tr></tr>");function Re(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(Pe,"$timeFormat",D),w=()=>G(Fe,"$relativeTime",D),m=()=>G(de,"$page",D),n=b(),d=b(),v=b(),N=b(),H=b();let k=se(h,"routingConfig",8),l=se(h,"version",8),J=se(h,"columns",8);y(()=>(B(l()),B(k())),()=>{x(n,l().version===k().currentVersion)}),y(()=>(B(l()),B(k())),()=>{x(d,l().version===k().rampingVersion)}),y(()=>B(l()),()=>{x(v,l().drainageStatus)}),y(()=>(e(n),e(d),e(v),Z),()=>{x(N,e(n)?t("deployments.current"):e(d)?t("deployments.ramping"):e(v)?Z(e(v),"VersionDrainageStatus"):t("common.inactive"))}),y(()=>(e(n),e(d),B(k()),e(v),Z),()=>{x(H,e(n)?t("deployments.current"):e(d)?t("deployments.ramping",{percentage:k().rampingVersionPercentage}):e(v)?Z(e(v),"VersionDrainageStatus"):t("common.inactive"))}),ge(),me();var P=Ne();le(P,5,J,({label:V})=>V,(V,R)=>{let T=()=>e(R).label;var K=ne(),M=A(K);{var ee=f=>{var F=We(),E=p(F);Le(E,{get status(){return e(N)},get version(){return l().version},get label(){return e(H)}}),a(F),o(f,F)},O=(f,F)=>{{var E=_=>{var I=qe(),Q=p(I,!0);a(I),C(u=>S(Q,u),[()=>{var u;return De((u=l())==null?void 0:u.createTime,c(),{relative:w()})}],i),o(_,I)},te=(_,I)=>{{var Q=u=>{var U=je(),X=p(U),s=p(X);const L=i(()=>ye({namespace:m().params.namespace,query:`TemporalWorkerDeploymentVersion="${l().version}"`}));_e(s,{icon:"external-link",get href(){return e(L)}}),a(X),a(U),o(u,U)};oe(_,u=>{T()===t("deployments.workflows")&&u(Q)},I)}};oe(f,_=>{T()===t("deployments.deployed")?_(E):_(te,!1)},F)}};oe(M,f=>{T()===t("deployments.version")?f(ee):f(O,!1)})}o(V,K)}),a(P),o(q,P),pe(),j()}var Ee=$('<caption class="sr-only" slot="caption"> </caption>'),Qe=$("<th> </th>"),Ue=$('<tr slot="headers" class="text-left"></tr>'),ze=$('<header class="flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"><div class="relative flex w-full flex-col gap-4"><div class="flex items-center gap-2"><!> <!> </div> <div class="flex w-full items-center justify-between"><h1> </h1> <!></div></div></header> <div class="bg-primary p-8"><!></div>',1);function Ae(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(de,"$page",D),w=b(),m=b(),n=b(),d=b(),v=[{label:t("deployments.version"),pinned:!0},{label:t("deployments.deployed"),pinned:!0},{label:t("deployments.workflows"),pinned:!0}];y(()=>c(),()=>{x(w,c().params.namespace)}),y(()=>c(),()=>{x(m,c().params.deployment)}),y(()=>(e(w),e(m)),()=>{x(n,{namespace:e(w),deploymentName:Ce(e(m))})}),y(()=>e(n),()=>{x(d,Se(e(n)))}),ge(),me();var N=ne(),H=A(N);he(H,()=>e(d),null,(k,l)=>{var J=ze(),P=A(J),V=p(P),R=p(V),T=p(R);const K=i(()=>Ie({namespace:e(w)}));_e(T,{get href(){return e(K)},icon:"chevron-left",children:(s,L)=>{ve();var r=fe();C(g=>S(r,g),[()=>t("deployments.back-to-deployments")],i),o(s,r)},$$slots:{default:!0}});var M=W(T,2);Te(M,{name:"chevron-left"});var ee=W(M);a(R);var O=W(R,2),f=p(O),F=p(f,!0);a(f);var E=W(f,2);const te=i(()=>ye({namespace:c().params.namespace,query:`TemporalWorkerDeployment="${e(m)}"`}));Ve(E,{get href(){return e(te)},children:(s,L)=>{ve();var r=fe();C(g=>S(r,g),[()=>t("deployments.go-to-workflows")],i),o(s,r)},$$slots:{default:!0}}),a(O),a(V),a(P);var _=W(P,2),I=p(_);const Q=i(()=>t("deployments.deployments")),u=i(()=>t("common.per-page")),U=i(()=>t("common.next-page")),X=i(()=>t("common.previous-page"));Be(I,{get"aria-label"(){return e(Q)},get perPageLabel(){return e(u)},get nextPageButtonLabel(){return e(U)},get previousPageButtonLabel(){return e(X)},pageButtonLabel:s=>t("common.go-to-page",{page:s}),get items(){return e(l).workerDeploymentInfo.versionSummaries},children:be,$$slots:{default:(s,L)=>{const r=i(()=>L.visibleItems);var g=ne(),z=A(g);le(z,1,()=>e(r),ue,(re,ae)=>{Re(re,{get routingConfig(){return e(l).workerDeploymentInfo.routingConfig},get version(){return e(ae)},columns:v})}),o(s,g)},caption:(s,L)=>{var r=Ee(),g=p(r,!0);a(r),C(z=>S(g,z),[()=>t("deployments.deployments")],i),o(s,r)},headers:(s,L)=>{var r=Ue();le(r,5,()=>v,ue,(g,z,re)=>{let ae=()=>e(z).label;var Y=Qe();we(Y,1,ke(re===0&&"w-full"));var xe=p(Y,!0);a(Y),C(()=>S(xe,ae())),o(g,Y)}),a(r),o(s,r)}}}),a(_),C(()=>{S(ee,` ${e(m)??""}`),S(F,e(m))}),o(k,J)}),o(q,N),pe(),j()}var Ge=$("<!> <!>",1);function gt(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(de,"$page",D),w=c().params.deployment;me();var m=Ge(),n=A(m);$e(n,{title:`Deployment | ${w}`,get url(){return c().url.href}});var d=W(n,2);Ae(d,{}),o(q,m),pe(),j()}export{gt as component};
